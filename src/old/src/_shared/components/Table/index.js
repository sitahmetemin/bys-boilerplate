import React, {Component} from 'react';import _ from 'lodash'import uuidv4 from 'uuid/v4'import TooltipModal from "../../../_shared/components/Tooltip";import Pagination from 'react-bootstrap/lib/Pagination';import './style.css'export default class Table extends Component {    constructor(props) {        super(props);        this.state = {            data: this.props.data        }    }    handleChange = (e) => {        let {data} = this.state,            val = _.trim(e.target.value),            keys = Object.keys(this.state.data[0]);        this.setState({            filter: val ? true : false,            tempData: val ? data.filter(a => {                return _.includes(a[keys[1]].toLowerCase(), val.toLowerCase())            }) : data        })    }    renderTh() {        const {children} = this.props;        if (children && _.isArray(children)) {            return children.map(function (colData, i) {                return <th key={'headTh_' + i}>                    {colData.props.children}                </th>;            })        } else {            return <th key={uuidv4()}>{children.props.children}</th>        }    }    iconTh() {        const {iconList} = this.props;        if (iconList && !_.isEmpty(iconList)) {            return iconList.map(function (icon, i) {                return <th className='header-icon' key={'icon_' + i} style={{width: 50}}></th>;            })        } else {            return null        }    }    handleClick(val, type) {        const {onClick} = this.props;        onClick && this.props.onClick(val, type)    }    iconList(item, iconPosition) {        const {iconList} = this.props;        if (iconList && !_.isEmpty(iconList)) {            return iconList.map((icon, i)=> {                let iconRender;                if (icon.toolTip && !_.isEmpty(icon.toolTip)) {                    iconRender = <TooltipModal key={'icon_list_' + i}                                               id="popover-trigger-hover-focus"                                               position={iconPosition === 'left' ? 'right' : 'left'}                                               text={icon.toolTip} title=""                                               type="tooltip">                        <td                            key={'icon_list_' + i}                            className={`is-icon ${icon.noClick ? 'no-click' : ''}`}                            onClick={() => !icon.noClick ? this.handleClick(item, icon.type) : {}}                        >                            <i className="material-icons">                                {icon.icon}                            </i>                        </td>                    </TooltipModal>                } else {                    iconRender = <td                        key={'icon_list_' + i}                        className={`is-icon ${icon.noClick ? 'no-click' : ''}`}                    >                        <i className="material-icons"                           onClick={() => icon.noClick ? this.handleClick(item, icon.type) : {}}>                            {icon.icon}                        </i>                    </td>                }                return iconRender            })        } else {            return null        }    }    generateHeaders() {        const {iconPosition} = this.props;        return <tr>            {iconPosition === 'left' && this.iconTh()}            {this.renderTh()}            {iconPosition === 'right' && this.iconTh()}        </tr>;    }    generateRows() {        const {children, iconPosition, clickRow} = this.props;        let {data, tempData, filter} = this.state,            cells;        data = filter ? tempData : data;        return data.map((item, index) => {            if (children && !!children.length) {                cells = children.map((colData, i) => {                    let width = {width: colData.props.width ? colData.props.width : {}},                        textAlign = {textAlign: colData.props.textAlign ? colData.props.textAlign : {}},                        fontWeight = {fontWeight: colData.props.bold ? 'bold' : {}}                    return <td                        key={'t_' + i}                        style={{...width, ...textAlign, ...fontWeight}}                        onClick={() => clickRow ? this.handleClick(item, null) : {}}                    >                        {item[colData.props.dataField]}                    </td>                })            } else if (children && !children.length && _.isObject(children)) {                cells = <td                    key={'t_' + index}                    onClick={() => clickRow ? this.handleClick(item, null) : {}}                >                    {item[children.props.dataField]}                </td>            }            return <tr                className={clickRow ? 'row-hover' : ''}                key={uuidv4()}            >                {iconPosition === 'left' && this.iconList(item)}                {cells}                {iconPosition === 'right' && this.iconList(item)}            </tr>        });    }    renderSearch() {        const {search} = this.props;        if (search) {            return <div className="search">                <input type="text" onChange={(val) => {                    this.handleChange(val)                }}/>                <i className="material-icons">search</i>            </div>        }    }    headIconList(val) {        if (val && !_.isEmpty(val) && val.length) {            return val.map((item, i) => {                return <TooltipModal key={'icon_list_head_' + i}                                     id="popover-trigger-hover-focus"                                     position={'bottom'}                                     text={item.toolTip} title=""                                     type="tooltip">                    <li>                        <i className="material-icons cover-bg-icon">{item.icon}</i>                    </li>                </TooltipModal>            })        }    }    renderHeadIcon() {        const {headIconList} = this.props;        if (headIconList && !_.isEmpty(headIconList)) {            return <div className="icon-list">                <ul>                    {this.headIconList(headIconList)}                </ul>            </div>        }    }    render() {        let headerComponents = this.generateHeaders(),            rowComponents = this.generateRows();        return (            <div className="digi-table table-responsive">                <table className={'table table-bordered'}>                    <caption className="text-center">                        {this.renderSearch()}                        {this.renderHeadIcon()}                    </caption>                    <thead>{headerComponents}</thead>                    <tbody>{rowComponents}</tbody>                </table>                {/*<div className="table-foot">                    <div className="col-md-9">                        <Pagination>                            <Pagination.First />                            <Pagination.Prev />                            <Pagination.Item>{1}</Pagination.Item>                            <Pagination.Ellipsis />                            <Pagination.Item>{10}</Pagination.Item>                            <Pagination.Item>{11}</Pagination.Item>                            <Pagination.Item active>{12}</Pagination.Item>                            <Pagination.Item>{13}</Pagination.Item>                            <Pagination.Item disabled>{14}</Pagination.Item>                            <Pagination.Ellipsis />                            <Pagination.Item>{20}</Pagination.Item>                            <Pagination.Next />                            <Pagination.Last />                        </Pagination>                    </div>                    <div className="clearfix"></div>                </div>*/}            </div>        );    }}